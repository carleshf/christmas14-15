<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>A New Christmas Card</title>
  <style>
    * { padding: 0; margin: 0; }
    canvas { background: #eee; display: block; margin: 0 auto; }
  </style>
</head>
<body>
  <canvas id="myCanvas" width="800" height="600"></canvas>
	<script>
		var canvas = document.getElementById("myCanvas")
		var context = canvas.getContext("2d")

    /* ----------------------------------------------------------------- */
    class TimeTraker {
      constructor(x, y, slots, width) {
        this.x = x
        this.y = y
        this.allowed_slots = slots
        this.used_slots = 0
        this.width = width
        this.offset_x = 8
        this.width = (this.width - this.offset_x * (this.allowed_slots - 2)) / this.allowed_slots
        this.height = 10
        console.log(this.width, " // ", this.height, " // ", this.allowed_slots)
      }

      addTime() {
        if(this.used_slots < this.allowed_slots) {
          this.used_slots += 1
        }
      }

      draw(ctx) {
        let iterative_x = this.x
        for(let ii = 0; ii < this.allowed_slots; ii++) {
          ctx.fillStyle = 'black'
          ctx.fillRect(iterative_x - 1, this.y - 1, this.width + 2, this.height + 2)
          if(ii < this.used_slots) {
            ctx.fillStyle = 'pink'
          } else {
            ctx.fillStyle = 'lightgray'
          }
          ctx.fillRect(iterative_x, this.y, this.width, this.height)

          iterative_x += this.width + this.offset_x
        }
      }
    }

    class MenuOption {
      constructor(text, char) {
        this.text = text
        this.char = char
      }
    }

    class Submenu {
      constructor(options) {
        this.options = options
      }
    }

    class Menu {
      constructor(x, y, options) {
        this.x = x
        this.y = y
        this.options = options
        this.offset_x = 8
        this.offset_y = 4
        this.px = 15
      }

      draw(ctx) {
        let iterative_x = this.x
        ctx.font = this.px + "px Courier New";
        for(let ii = 0; ii < this.options.length; ii++) {
          let txt = this.options[ii].text
          ctx.fillStyle = 'black'
          ctx.fillRect(iterative_x, this.y - this.px - 1, ctx.measureText(txt).width + this.offset_x + 2, this.px + this.offset_y + 2)
          ctx.fillStyle = 'lightgray'
          ctx.fillRect(iterative_x + 1, this.y - this.px, ctx.measureText(txt).width + this.offset_x, this.px + this.offset_y)
          ctx.fillStyle = 'black'
          ctx.fillText(txt, iterative_x + this.offset_x / 2 + 1, this.y)

          iterative_x += ctx.measureText(txt).width + this.offset_x * 2
        }
      }
    }

    function createMainMenu(x = 10, y = 20) {
      let options = ['Menu', 'Travel', 'Search', 'Connections']
      options = options.map( (op) => new MenuOption(op, op.charAt(0)))
      return new Menu(x, y, options)  
    }

    let time_traker = new TimeTraker(35, 10, 25, 700)
    time_traker.addTime()
    time_traker.addTime()
    time_traker.addTime()
    time_traker.draw(context)
    let main_menu = createMainMenu(10, 500)
    main_menu.draw(context)
  </script>
</body>
</html>